{
    "domain": {
        "service": "sc_smart_region_andalucia",
        "subservice": "/pct_cartuja"
    },
    "contextBroker": {
        "protocol": "https",
        "host": "cb.iotplatform.telefonica.com",
        "port": 10027,
        "ngsiVersion": "2.0"
    },
    "authentication": {
        "provider": "keystone",
        "protocol": "https",
        "host": "auth.iotplatform.telefonica.com",
        "port": 15001,
        "user": "admin_andalucia",
        "password": "4dmin_andalucia"
    },
    "exports": {
        "now": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
    },
    "entities": [
        {
            "schedule": "10 */15 * * * *",
            "entity_name": "OnStreetParking:OnZone02",
            "entity_type": "OnStreetParking",
            "active": [
                {
                    "name": "occupiedSpotNumber",
                    "type": "Number",
                    "value": "time-random-linear-interpolator({\"spec\": [[0,2],[7,random(5,10)],[9,random(70,75)],[12,random(75,90)],[16,random(40,45)],[21,random(15,20)],[22,random(5,10)],[24,2]], \"return\": {\"type\": \"integer\", \"rounding\": \"round\"}})"
                },
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "25 */15 * * * *",
            "entity_name": "OnStreetParking:OnZone03",
            "entity_type": "OnStreetParking",
            "active": [
                {
                    "name": "occupiedSpotNumber",
                    "type": "Number",
                    "value": "time-random-linear-interpolator({\"spec\": [[0,2],[7,random(5,10)],[9,random(70,75)],[12,random(75,90)],[16,random(40,45)],[21,random(15,20)],[22,random(5,10)],[24,2]], \"return\": {\"type\": \"integer\", \"rounding\": \"round\"}})"
                },
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "45 */15 * * * *",
            "entity_name": "OnStreetParking:OnZone04",
            "entity_type": "OnStreetParking",
            "active": [
                {
                    "name": "occupiedSpotNumber",
                    "type": "Number",
                    "value": "time-random-linear-interpolator({\"spec\": [[0,2],[7,random(5,10)],[9,random(70,75)],[12,random(75,90)],[16,random(40,45)],[21,random(15,20)],[22,random(5,10)],[24,2]], \"return\": {\"type\": \"integer\", \"rounding\": \"round\"}})"
                },
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "once",
            "entity_name": "ParkingSpot:PS01",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "import(now)"
                },
                {
                    "name": "battery",
                    "type": "Number",
                    "value": "time-random-linear-interpolator({\"spec\": [[0,3.16],[6,random(3.14,3.18)],[12,random(3.14,3.18)],[18,random(3.14,3.18)],[24,3.16]], \"return\": {\"type\": \"float\"}})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "import(now)"
                },
                {
                    "name": "status",
                    "type": "Text",
                    "value": "free"
                },
                {
                    "name": "occupied",
                    "type": "Number",
                    "value": 0
                },
                {
                    "name": "rotationCounter",
                    "type": "Number",
                    "value": 0
                },
                {
                    "name": "previousOccupiedRotation",
                    "type": "Number",
                    "value": -1
                },
                {
                    "name": "previousRotationBegin",
                    "type": "DateTime",
                    "value": "1970-01-01T00:00:00+01"
                },
                {
                    "name": "previousRotationEnd",
                    "type": "DateTime",
                    "value": "import(now)"
                },
                {
                    "name": "previousRotationDuration",
                    "type": "Number",
                    "value": 0
                }
            ]
        },
        {
            "schedule": "0 */11 * * * *",
            "entity_name": "ParkingSpot:PS01",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "import(now)"
                },
                {
                    "name": "battery",
                    "type": "Number",
                    "value": "time-random-linear-interpolator({\"spec\": [[0,3.16],[6,random(3.14,3.18)],[12,random(3.14,3.18)],[18,random(3.14,3.18)],[24,3.16]], \"return\": {\"type\": \"float\"}})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "import(now)"
                },
                {
                    "name": "status",
                    "type": "Text",
                    "value": "attribute-function-interpolator(${{ParkingSpot:PS01}{occupied}} ? \"free\" : \"occupied\")"
                },
                {
                    "name": "occupied",
                    "type": "Number",
                    "value": "attribute-function-interpolator(${{ParkingSpot:PS01}{occupied}} ? 0 : 1)"
                },
                {
                    "name": "rotationCounter",
                    "type": "Number",
                    "value": "attribute-function-interpolator(${{ParkingSpot:PS01}{rotationCounter}} + 1)"
                },
                {
                    "name": "previousOccupiedRotation",
                    "type": "Number",
                    "value": "attribute-function-interpolator(${{ParkingSpot:PS01}{occupied}})"
                },
                {
                    "name": "previousRotationBegin",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": -660})"
                },
                {
                    "name": "previousRotationEnd",
                    "type": "DateTime",
                    "value": "import(now)"
                },
                {
                    "name": "previousRotationDuration",
                    "type": "Number",
                    "value": 660
                }
            ]
        },
        {
            "schedule": "0 */12 * * * *",
            "entity_name": "ParkingSpot:PS02",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "0 */13 * * * *",
            "entity_name": "ParkingSpot:PS03",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "0 */14 * * * *",
            "entity_name": "ParkingSpot:PS04",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "0 */15 * * * *",
            "entity_name": "ParkingSpot:PS05",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "0 */16 * * * *",
            "entity_name": "ParkingSpot:PS06",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        },
        {
            "schedule": "0 */17 * * * *",
            "entity_name": "ParkingSpot:PS07",
            "entity_type": "ParkingSpot",
            "active": [
                {
                    "name": "TimeInstant",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                },
                {
                    "name": "occupancyModified",
                    "type": "DateTime",
                    "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                }
            ]
        }
    ]
}
